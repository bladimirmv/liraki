<div class="content">
  <div class="cart-container">
    <div class="order-cart">
      <mat-horizontal-stepper
        labelPosition="bottom"
        orientation="vertical"
        linear
        #stepper
        class="mat-elevation-z1 cart-stepper"
      >
        <mat-step [editable]="true" [stepControl]="carritoForm">
          <ng-template matStepLabel>Carrito</ng-template>

          <div class="order" *ngIf="carritoProducto">
            <header class="order-header">
              <span class="order-title">
                <mat-icon> shopping_cart </mat-icon>
                Resumen del pedido
              </span>
              <button
                mat-button
                class="btn-remove-all"
                (click)="deleteCarritoProducto(carritoProducto[0].uuidCliente)"
              >
                Eliminar todo
              </button>
            </header>

            <ul class="order-list">
              <li class="order-item" *ngFor="let carrito of carritoProducto">
                <div class="product">
                  <picture class="picture">
                    <img [src]="getImage(carrito.producto.keyName)" alt="" />
                  </picture>

                  <div class="product-detail">
                    <a
                      href="#"
                      [routerLink]="['/product', carrito.producto.uuid]"
                      >{{ carrito.producto.nombre | titlecase }}</a
                    >
                    <span>{{ carrito.producto.descripcion }}</span>
                  </div>
                </div>

                <div class="product-options">
                  <div class="product-quantity">
                    <span class="no-select text-bold product-price"
                      >Bs. {{ carrito.producto.precio }}
                    </span>
                    <button
                      mat-icon-button
                      (click)="reduceProductoCarrito(carrito)"
                    >
                      <mat-icon> remove </mat-icon>
                    </button>
                    <span
                      style="min-width: 25px; text-align: center"
                      class="no-select"
                    >
                      {{ carrito.cantidad }}
                    </span>

                    <button
                      mat-icon-button
                      (click)="addCarritoProducto(carrito.producto.uuid)"
                    >
                      <mat-icon> add </mat-icon>
                    </button>
                  </div>

                  <button
                    mat-icon-button
                    color="warn"
                    (click)="deleteOneProducoFromCarrito(carrito.uuid)"
                  >
                    <mat-icon> delete </mat-icon>
                  </button>
                </div>
              </li>
            </ul>
          </div>

          <div class="btn-stepper" *ngIf="carritoProducto">
            <button mat-button class="mat-btn-primary" matStepperNext>
              <mat-icon> last_page </mat-icon>
              Continuar
            </button>
          </div>

          <section class="empty_cart" *ngIf="!carritoProducto">
            <img src="./assets/empty_cart.svg" alt="" width="300px" />
            <br />
            <span>Tu carrito esta vacio üôÅ </span>
            <br />
            <button
              mat-button
              class="mat-btn-primary"
              routerLink="/products"
              *ngIf="usuario && !carritoProducto"
            >
              Ver productos
            </button>

            <div class="no-user-actions">
              <button
                mat-button
                class="mat-btn-primary"
                routerLink="/login"
                *ngIf="!usuario"
              >
                Iniciar sesi√≥n
              </button>
              <button
                mat-button
                class="mat-btn-secondary"
                routerLink="/register"
                *ngIf="!usuario"
              >
                Reg√≠strarse ahora
              </button>
            </div>
          </section>
        </mat-step>

        <mat-step
          [stepControl]="secondFormGroup"
          [editable]="isEditable"
          errorMessage="Name is required."
        >
          <form class="new-user-form" [formGroup]="datosPersonales">
            <!-- *Nombre -->
            <!-- <mat-form-field
              class="full-width"
              [color]="isValidField('nombre').color"
            >
              <mat-label>Nombre</mat-label>
              <input matInput formControlName="nombre" autocomplete="no" />
              <mat-icon matSuffix [color]="isValidField('nombre').color">
                {{ isValidField("nombre").icon }}
              </mat-icon>
              <mat-error *ngIf="usuarioForm.get('nombre').errors?.required">
                Ingrese un nombre.
              </mat-error>
              <mat-error *ngIf="usuarioForm.get('nombre').errors?.pattern">
                Ingresa un nombre valido.
              </mat-error>
            </mat-form-field> -->
          </form>
        </mat-step>

        <mat-step>
          <ng-template matStepLabel>Metodo de Pago</ng-template>
          <p>You are now done.</p>
          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button (click)="stepper.reset()">Reset</button>
          </div>
        </mat-step>
      </mat-horizontal-stepper>
    </div>

    <section>
      <div class="payment-summary mat-elevation-z1">
        <h2 class="cart-title gradient-text">
          Area de envios gratuito en Cochabamba
        </h2>

        <iframe
          src="https://www.google.com/maps/d/u/3/embed?mid=1d_wL-Rg4055dy4rzSRz4VoQ_rOgcrDqg&ehbc=2E312F"
          width="100%"
          height="400"
        ></iframe>
      </div>
    </section>
  </div>

  <app-card-slider
    [title]="'Recientemente agregados'"
    [id]="'recientemente-agregados'"
    [products]="productos"
    [qParams]="{ order: 'recientemente_agregados' }"
  ></app-card-slider>

  <br />
</div>
